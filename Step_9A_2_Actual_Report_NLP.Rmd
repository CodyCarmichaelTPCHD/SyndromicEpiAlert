---
title: "EpiAlert v2.0 - NLP Report"
author: "TPCHD - APD Team"
date: "`r format(Sys.time(), '%d %B %Y')`"
output: rmdformats::material
---


```{r setup, include=FALSE}

library(knitr)
library(kableExtra)
knitr::opts_chunk$set(message = FALSE)
load("IterativeData.RData")


Syndromename <- ifelse(DF_Iter$ComboExamination == TRUE, 
                        DF_Iter$PairedSyndromeName[1], 
                        DF_Iter$Syndromes[1])


StartDate <- DF_Iter$StartDate[1] 
EndDate <- DF_Iter$EndDate[1]

```


Introduction
===========
This data product was created with the intent of examining incidents of interest for any syndromes available through the ESSENCE system. As such, this data product has the same limitations as the ESSENCE system and precautions should be taken when interpreting results as anything other than preliminary, and are subject to change with data fill-in. Any trends within a 14 day period should be treated with caution. 

**This Report was generated for Syndrome: `r Syndromename`, Date: `r StartDate` to `r EndDate`. **




```{r ,echo=FALSE}
 if (DF_Iter$NLPAnalysis[1] == TRUE) {
asis_output("# NLP: Topic Modeling Results \n") # Header that is only shown if print_option == TRUE
 }
```
```{r ,echo=FALSE}
 if (DF_Iter$NLPAnalysis[1] == TRUE) {
asis_output("## Topic Model Results and Interpretations \n") # Header that is only shown if print_option == TRUE
asis_output("Topic modeling is a type of statistical model used in natural language processing and text mining to discover abstract topics within a collection of documents (in this case, individual visit records). It assumes that documents are mixtures of topics, where a topic is a distribution of words. This approach helps in organizing and summarizing large datasets of textual information. \n\n

Topics in topic modeling are designated through algorithms like Latent Dirichlet Allocation (LDA). Here, each document in the dataset is considered a mixture of various topics, and each word in the document is attributed to one of the document's topics. The algorithm iteratively adjusts the composition of topics in each document and the distribution of words in each topic until it reaches the best arrangement.\n\n

The beta score in topic modeling represents the distribution of words for a given topic. It is a parameter that influences the granularity of the topics extracted by the model. A higher beta score means that the topic is represented by a broader array of words, leading to more general topics. Conversely, a lower beta score leads to topics that are represented by a narrower, more specific set of words, resulting in more distinct and finely-grained topics. This parameter plays a crucial role in the coherence and interpretability of the topics generated by the model.\n\n")
 }
```
```{r ,echo=FALSE}
 if (DF_Iter$NLPAnalysis[1] == TRUE) {
asis_output("## Topic Modeling Results - Admit Reason \n") # Header that is only shown if print_option == TRUE
 }
```
```{r ,echo=FALSE, warning=FALSE}
 if (DF_Iter$NLPAnalysis[1] == TRUE) {
load("TopicModelingNLP.RData")
basic_table <- kable(AD_top_terms, "html", booktabs = TRUE)
styled_table <- basic_table %>%
  kable_styling(bootstrap_options = c("striped", "hover"), full_width = F) %>%
  add_header_above(c("Topic" = 1, "Word and Beta Score" = 2))

styled_table

 }
```
```{r ,echo=FALSE}
 if (DF_Iter$NLPAnalysis[1] == TRUE) {
asis_output("## Topic Modeling Results - Chief Complaint \n") # Header that is only shown if print_option == TRUE
 }
```
```{r ,echo=FALSE, warning=FALSE}
 if (DF_Iter$NLPAnalysis[1] == TRUE) {
basic_table <- kable(CC_top_terms, "html", booktabs = TRUE)
styled_table <- basic_table %>%
  kable_styling(bootstrap_options = c("striped", "hover"), full_width = F) %>%
  add_header_above(c("Topic" = 1, "Word and Beta Score" = 2))

styled_table

 }
```
```{r ,echo=FALSE}
 if (DF_Iter$NLPAnalysis[1] == TRUE) {
asis_output("## Topic Modeling Results - Discharge Diagnosis \n") # Header that is only shown if print_option == TRUE
 }
```
```{r ,echo=FALSE, warning=FALSE}
 if (DF_Iter$NLPAnalysis[1] == TRUE) {
basic_table <- kable(DD_top_terms, "html", booktabs = TRUE)
styled_table <- basic_table %>%
  kable_styling(bootstrap_options = c("striped", "hover"), full_width = F) %>%
  add_header_above(c("Topic" = 1, "Word and Beta Score" = 2))

styled_table
 }
```
```{r ,echo=FALSE}
 if (DF_Iter$NLPAnalysis[1] == TRUE) {
asis_output("## Topic Modeling Results - Diagnosis ICD Categories \n") # Header that is only shown if print_option == TRUE
 }
```
```{r ,echo=FALSE, warning=FALSE}
 if (DF_Iter$NLPAnalysis[1] == TRUE) {
basic_table <- kable(ICD_top_terms, "html", booktabs = TRUE)
styled_table <- basic_table %>%
  kable_styling(bootstrap_options = c("striped", "hover"), full_width = F) %>%
  add_header_above(c("Topic" = 1, "Word and Beta Score" = 2))

styled_table
 }
```
```{r ,echo=FALSE}
 if (DF_Iter$NLPAnalysis[1] == TRUE) {
asis_output("# NLP: Social Network Analysis Graphs  \n") # Header that is only shown if print_option == TRUE
 }
```
```{r ,echo=FALSE}
 if (DF_Iter$NLPAnalysis[1] == TRUE) {
asis_output("For these graphs, each node represents a distinct word found in the ESSENCE record. The edges (or links) between these nodes signify the relationships between words. These relationships can be based on various criteria, such as the frequency with which words appear together within a record or across multiple records. For instance, words that frequently appear in close proximity or in similar contexts may be linked together, suggesting a related or shared meaning. \n\n

The analysis can reveal clusters or communities within the graph, where densely interconnected nodes suggest a group of words that are often used together, indicating a specific medical concept or theme. For example, words like 'diabetes,' 'insulin,' and 'glucose' might form a cluster, representing a specific area of medical concern.")
 }
```
```{r ,echo=FALSE, warning=FALSE}
 if (DF_Iter$NLPAnalysis[1] == TRUE) {
load("SNA_NetworksNLP.RData")
}
```
```{r ,echo=FALSE}
 if (DF_Iter$NLPAnalysis[1] == TRUE) {
asis_output("## NLP: Network Analysis Graphs - Admit Reason \n") # Header that is only shown if print_option == TRUE
 }
```
```{r ,echo=FALSE}
 if (DF_Iter$NLPAnalysis[1] == TRUE) {
   AD_network
 }
```
```{r ,echo=FALSE}
 if (DF_Iter$NLPAnalysis[1] == TRUE) {
asis_output("## NLP: Network Analysis Graphs - Chief Complaint \n") # Header that is only shown if print_option == TRUE
 }
```
```{r ,echo=FALSE}
 if (DF_Iter$NLPAnalysis[1] == TRUE) {
   CC_network
 }
```
```{r ,echo=FALSE}
 if (DF_Iter$NLPAnalysis[1] == TRUE) {
asis_output("## NLP: Network Analysis Graphs - Discharge Diagnosis \n") # Header that is only shown if print_option == TRUE
 }
```
```{r ,echo=FALSE}
 if (DF_Iter$NLPAnalysis[1] == TRUE) {
   DD_network
 }
```
```{r ,echo=FALSE}
 if (DF_Iter$NLPAnalysis[1] == TRUE) {
asis_output("## NLP: Network Analysis Graphs - Diagnosis ICD Category \n") # Header that is only shown if print_option == TRUE
 }
```
```{r ,echo=FALSE}
 if (DF_Iter$NLPAnalysis[1] == TRUE) {
   ICD_network
 }
```
